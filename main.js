(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{U:()=>m});const t=class{constructor(e,t,o=null){this._title=e,this._text=t,this._tags=o||[],this._exists=!0}get title(){return this._title}set title(e){this._title=e}get text(){return this._text}set text(e){this._text=e}get tags(){return this._tags}set tags(e){this._tags=e}addTag(e){this._tags.push(e)}get exists(){return this._exists}set exists(e){this._exists=e}},o=class{constructor(e,t=null){this._text=e,this._color=t,null==t&&(this._color=this.generateColor())}get text(){return this._text}set text(e){this._text=e}get color(){return this._color}set color(e){return this._color}getTextID(){let e=0;for(let t=0;t<this._text.length;t++)e+=this._text.charCodeAt(t);return e}generateColor(){return["red","purple","green","blue","yellow","orange"][this.getTextID()%6]}};class r{constructor(e){this._name=e,this._title=e+"'s",this._todos=[],this._type="workspace"}get todos(){return this._todos}addTodo(e){this._todos.push(e)}removeTodo(e){for(let t=0;t<this._todos.length;t++)if(this._todos[t].title==e)return this._todos.pop(t)}get title(){return this._title}set title(e){this._title=e}get name(){return this._name}get type(){return this._type}}function s(e,t){const o=document.createElement("div");o.classList.add("content"),o.innerHTML=`\n        <h1 class="todo-title">${e.title} Todos</h1>\n        <h2 class="todo-desc">\n            You've got <span class="todo-count">${e.todos.length}</span> todos to\n            complete\n        </h2>\n        <div class="add-new-task">\n            <input class="regular-checkbox" type="checkbox" name="add-task" value="del">\n            <input class="add-text-field" type="text" name="add-task-text" placeholder="Add a new task" minlength="3">\n        </div>\n    `,e.todos.forEach((e=>{o.innerHTML+=`\n            <div class="todo-card">\n                <input class="regular-checkbox for-del" type="checkbox" name="add-task" value="del">\n                <div class="card-content">\n                    <h2>${e.title}</h2>\n                    <p>${e.text}</p>\n                    <div class="label-container">\n                    </div>\n                </div>\n            </div>\n        `;let t=o.querySelectorAll(".label-container"),r=t[t.length-1];e.tags.forEach((e=>{let t=document.createElement("div");t.classList.add("label"),t.classList.add(e.color),t.textContent=e.text,r.append(t)}))})),"project"==e.type&&(o.querySelector("h1").style=`\n            background-color: var(--highlight-${e.color});\n            border: 6px solid var(--highlight-${e.color});\n            border-radius: 8px;\n        `);const r=document.querySelector(".pop-up"),n=o.querySelector(".add-text-field");return n.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),n.value.length>=3&&(r.classList.add("active"),document.querySelector(".h1-input").value=n.value,document.querySelector(".p-input").value=""))})),o.querySelectorAll(".for-del").forEach((t=>{t.addEventListener("change",(o=>{if(o.currentTarget.checked){let r=t.closest(".todo-card"),n=o.currentTarget;setTimeout((()=>{n.checked&&(r.classList.add("dissolve"),setTimeout((()=>{e.removeTodo(r.querySelector("h2").textContent),m(s(e),e)}),1e3))}),1e3)}}))})),o}class n extends r{constructor(e,t){super(e),this._color=t,this._type="project"}get color(){return this._color}set color(e){this._color=e}get title(){return this._name}}const c=new r("Today"),l=new r("Week");l.title="This Week's";const a=new n("Homework","purple"),i=new n("Personal","green");let d,u=[c,l,a,i],h=[],p=[new o("js"),new o("project"),new o("todo")],v=new t("Practice using JS module","Create a todo-list application to achieve this");v.tags=p,c.addTodo(v),p=[new o("css"),new o("html5"),new o("work")],v=new t("Practice CSS Flexbox","Use practice tools such as flexbox froggy"),v.tags=p,c.addTodo(v);let g=document.querySelector(".content");function m(e,t){let o=e;g.replaceWith(o),g=o,d=t}function y(e){document.querySelector(".project-container").append(function(e){const t=document.createElement("div");return t.classList.add("project","btn-group"),t.innerHTML=`\n        <div class="proj-color ${e.color}"></div>\n        <div class="proj-title">${e.name}</div>\n    `,t.dataset.project=e.name,t}(e))}y(a),y(i),m(s(c),c);const _=document.querySelectorAll(".btn-group");_.forEach((e=>{e.addEventListener("click",(t=>{if(!e.classList.contains("selected")){if(e.classList.add("selected"),"group-today"==e.id)m(s(c),c);else if("group-week"==e.id)m(s(l),l);else if(null!=e.dataset.project){let t;u.forEach((o=>{o.name==e.dataset.project&&(t=o)})),m(s(t),t)}_.forEach((t=>{e!==t&&t.classList.remove("selected")}))}}))}));const x=document.querySelector("button.create-todo"),S=document.querySelector(".h1-input"),q=document.querySelector(".p-input");x.addEventListener("click",(e=>{let o=!1;if(S.value.length<3?(o=!0,document.querySelector("#h1-error").classList.add("active")):document.querySelector("#h1-error").classList.remove("active"),q.value.length<3?(o=!0,document.querySelector("#p-error").classList.add("active")):document.querySelector("#p-error").classList.remove("active"),o)return;let r=new t(S.value,q.value);r.tags=h,d.addTodo(r),m(s(d),d),document.querySelector(".pop-up").classList.remove("active")})),document.querySelector(".tag-icon").addEventListener("click",(e=>{document.querySelector(".add-tag").classList.toggle("active")})),console.log("test");const f=document.querySelector(".pop-up");window.addEventListener("keydown",(e=>{"Escape"===e.key&&(e.preventDefault(),document.querySelector(".h1-input").value="",document.querySelector(".p-input").value="",f.classList.remove("active"),h=[],document.querySelector(".edit-label-container").replaceChildren())})),document.querySelector(".edit-circle").addEventListener("click",(e=>{document.querySelector(".h1-input").value="",document.querySelector(".p-input").value="",f.classList.remove("active"),h=[],document.querySelector(".edit-label-container").replaceChildren()}));const L=document.querySelector(".add-tag"),k=document.querySelector(".edit-label-container");L.addEventListener("keypress",(e=>{if("Enter"===e.key&&L.value.length>=1){let e=new o(L.value);h.push(e);let t=document.createElement("div");t.classList.add("label"),t.classList.add(e.color),t.textContent=L.value,k.append(t),L.value=""}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUMsRUFBV2pFLFNBQVNhLGNBQWMsWUFDbENOLEVBQWlCUCxTQUFTYSxjQUFjLHlCQUM5Q29ELEVBQVNoRCxpQkFBaUIsWUFBYUMsSUFDbkMsR0FBa0IsVUFBZEEsRUFBTXRFLEtBQ0ZxSCxFQUFTN0MsTUFBTXJDLFFBQVUsRUFBRyxDQUU1QixJQUFJbUYsRUFBZSxJQUFJLEVBQU1ELEVBQVM3QyxPQUN0Q2tCLEVBQVlqRSxLQUNSNkYsR0FHSixJQUFJQyxFQUFZbkUsU0FBU0MsY0FBYyxPQUN2Q2tFLEVBQVVqRSxVQUFVQyxJQUFJLFNBQ3hCZ0UsRUFBVWpFLFVBQVVDLElBQUkrRCxFQUFhMUYsT0FDckMyRixFQUFVeEQsWUFBY3NELEVBQVM3QyxNQUdqQ2IsRUFBZUssT0FBT3VELEdBQ3RCRixFQUFTN0MsTUFBUSxFQUNyQixDQUNKLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWFwcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWFwcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG9kby1hcHAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy90b2RvLmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL2xhYmVsLmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL3dvcmtzcGFjZS5qcyIsIndlYnBhY2s6Ly90b2RvLWFwcC8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IExhYmVsIGZyb20gXCIuL2xhYmVsXCI7XHJcblxyXG5jbGFzcyBUb2RvIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB0ZXh0LCB0YWdzPW51bGwpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xyXG5cclxuICAgICAgICB0aGlzLl90YWdzID0gdGFncyA/IHRhZ3MgOiBbXTtcclxuICAgICAgICB0aGlzLl9leGlzdHMgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0aXRsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRpdGxlKG5ld1RpdGxlKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSBuZXdUaXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGV4dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGV4dChuZXdUZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fdGV4dCA9IG5ld1RleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRhZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhZ3M7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRhZ3MobmV3VGFncykge1xyXG4gICAgICAgIHRoaXMuX3RhZ3MgPSBuZXdUYWdzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFRhZyhuZXdUYWcpIHtcclxuICAgICAgICB0aGlzLl90YWdzLnB1c2gobmV3VGFnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgZXhpc3RzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9leGlzdHM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGV4aXN0cyhuZXdFeGlzdHMpIHtcclxuICAgICAgICB0aGlzLl9leGlzdHMgPSBuZXdFeGlzdHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRvZG87IiwiY2xhc3MgTGFiZWwge1xyXG4gICAgY29uc3RydWN0b3IodGV4dCwgY29sb3I9bnVsbCkge1xyXG4gICAgICAgIHRoaXMuX3RleHQgPSB0ZXh0O1xyXG5cclxuICAgICAgICB0aGlzLl9jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIGlmIChjb2xvciA9PSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy5fY29sb3IgPSB0aGlzLmdlbmVyYXRlQ29sb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRcclxuICAgIH07XHJcblxyXG4gICAgc2V0IHRleHQobmV3VGV4dCkge1xyXG4gICAgICAgIHRoaXMuX3RleHQgPSBuZXdUZXh0XHJcbiAgICB9O1xyXG5cclxuICAgIGdldCBjb2xvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNvbG9yKG5ld0NvbG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRleHRJRCgpIHtcclxuICAgICAgICBsZXQgdmFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3RleHQubGVuZ3RoOyBpKysgKSB7XHJcbiAgICAgICAgICAgIHZhbCArPSB0aGlzLl90ZXh0LmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsO1xyXG4gICAgfVxyXG5cclxuICAgIGdlbmVyYXRlQ29sb3IoKSB7XHJcbiAgICAgICAgbGV0IGNvbG9ycyA9IFtcInJlZFwiLCBcInB1cnBsZVwiLCBcImdyZWVuXCIsIFwiYmx1ZVwiLCBcInllbGxvd1wiLCBcIm9yYW5nZVwiXTtcclxuICAgICAgICByZXR1cm4gY29sb3JzW3RoaXMuZ2V0VGV4dElEKCkgJSA2XTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGFiZWw7IiwiaW1wb3J0IExhYmVsIGZyb20gXCIuL2xhYmVsXCI7XHJcbmltcG9ydCBUb2RvIGZyb20gXCIuL3RvZG9cIjtcclxuaW1wb3J0IHsgc2V0Q29udGVudCB9IGZyb20gXCIuXCI7XHJcblxyXG5jbGFzcyBXb3Jrc3BhY2Uge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gbmFtZSArIFwiJ3NcIjtcclxuICAgICAgICB0aGlzLl90b2RvcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3R5cGUgPSBcIndvcmtzcGFjZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0b2RvcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9kb3M7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVG9kbyh0b2RvKSB7XHJcbiAgICAgICAgdGhpcy5fdG9kb3MucHVzaCh0b2RvKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVUb2RvKHRpdGxlKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl90b2Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdG9kb3NbaV0udGl0bGUgPT0gdGl0bGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl90b2Rvcy5wb3AoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHRpdGxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGl0bGUobmV3VGl0bGUpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IG5ld1RpdGxlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90eXBlO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVXb3Jrc3BhY2Uod29ya3NwYWNlLCBtYWluKSB7XHJcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImNvbnRlbnRcIik7XHJcblxyXG4gICAgY29udGVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGgxIGNsYXNzPVwidG9kby10aXRsZVwiPiR7d29ya3NwYWNlLnRpdGxlfSBUb2RvczwvaDE+XHJcbiAgICAgICAgPGgyIGNsYXNzPVwidG9kby1kZXNjXCI+XHJcbiAgICAgICAgICAgIFlvdSd2ZSBnb3QgPHNwYW4gY2xhc3M9XCJ0b2RvLWNvdW50XCI+JHt3b3Jrc3BhY2UudG9kb3MubGVuZ3RofTwvc3Bhbj4gdG9kb3MgdG9cclxuICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICA8L2gyPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhZGQtbmV3LXRhc2tcIj5cclxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwicmVndWxhci1jaGVja2JveFwiIHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJhZGQtdGFza1wiIHZhbHVlPVwiZGVsXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImFkZC10ZXh0LWZpZWxkXCIgdHlwZT1cInRleHRcIiBuYW1lPVwiYWRkLXRhc2stdGV4dFwiIHBsYWNlaG9sZGVyPVwiQWRkIGEgbmV3IHRhc2tcIiBtaW5sZW5ndGg9XCIzXCI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIENyZWF0ZSB0b2Rvc1xyXG4gICAgd29ya3NwYWNlLnRvZG9zLmZvckVhY2godG9kID0+IHtcclxuICAgICAgICBjb250ZW50LmlubmVySFRNTCArPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvLWNhcmRcIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInJlZ3VsYXItY2hlY2tib3ggZm9yLWRlbFwiIHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJhZGQtdGFza1wiIHZhbHVlPVwiZGVsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgyPiR7dG9kLnRpdGxlfTwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+JHt0b2QudGV4dH08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxhYmVsLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIGBcclxuXHJcbiAgICAgICAgbGV0IGxhYmVsQ29udGFpbmVyID0gY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxhYmVsLWNvbnRhaW5lclwiKTtcclxuICAgICAgICBsZXQgY3VycmVudExhYmVsQ29udGFpbmVyID0gbGFiZWxDb250YWluZXJbbGFiZWxDb250YWluZXIubGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgIC8vIEFkZCB0YWdzXHJcbiAgICAgICAgdG9kLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3VGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgbmV3VGFnLmNsYXNzTGlzdC5hZGQoXCJsYWJlbFwiKVxyXG4gICAgICAgICAgICBuZXdUYWcuY2xhc3NMaXN0LmFkZCh0YWcuY29sb3IpO1xyXG4gICAgICAgICAgICBuZXdUYWcudGV4dENvbnRlbnQgPSB0YWcudGV4dDtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRMYWJlbENvbnRhaW5lci5hcHBlbmQobmV3VGFnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBQcm9qZWN0IHNwZWNpZmljXHJcbiAgICBpZiAod29ya3NwYWNlLnR5cGUgPT0gXCJwcm9qZWN0XCIpIHtcclxuICAgICAgICBjb25zdCBoZWFkZXJUaXRsZSA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcihcImgxXCIpO1xyXG4gICAgICAgIGhlYWRlclRpdGxlLnN0eWxlID0gYFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1oaWdobGlnaHQtJHt3b3Jrc3BhY2UuY29sb3J9KTtcclxuICAgICAgICAgICAgYm9yZGVyOiA2cHggc29saWQgdmFyKC0taGlnaGxpZ2h0LSR7d29ya3NwYWNlLmNvbG9yfSk7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcclxuICAgICAgICBgXHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIEFjdGlvbnNcclxuICAgICovXHJcblxyXG4gICAgLy8gT3BlbiBwb3B1cCBmb3IgbmV3IHRhc2tcclxuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3AtdXBcIik7XHJcbiAgICBjb25zdCBhZGRUb2RvRmllbGQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRleHQtZmllbGRcIik7XHJcbiAgICBhZGRUb2RvRmllbGQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoYWRkVG9kb0ZpZWxkLnZhbHVlLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oMS1pbnB1dFwiKS52YWx1ZSA9IGFkZFRvZG9GaWVsZC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucC1pbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEZWxldGUgVG9kb1xyXG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3ItZGVsXCIpO1xyXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKChja2J4KSA9PiB7XHJcbiAgICAgICAgY2tieC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoZWNrQ2FyZCA9IGNrYnguY2xvc2VzdChcIi50b2RvLWNhcmRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBlLmN1cnJlbnRUYXJnZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnIuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0NhcmQuY2xhc3NMaXN0LmFkZChcImRpc3NvbHZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5yZW1vdmVUb2RvKGNoZWNrQ2FyZC5xdWVyeVNlbGVjdG9yKFwiaDJcIikudGV4dENvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q29udGVudChjcmVhdGVXb3Jrc3BhY2Uod29ya3NwYWNlKSwgd29ya3NwYWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcblxyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCB7IFdvcmtzcGFjZSwgY3JlYXRlV29ya3NwYWNlIH07XHJcbiIsImltcG9ydCB7IFdvcmtzcGFjZSB9IGZyb20gXCIuL3dvcmtzcGFjZVwiO1xyXG5cclxuY2xhc3MgUHJvamVjdCBleHRlbmRzIFdvcmtzcGFjZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb2xvcikge1xyXG4gICAgICAgIHN1cGVyKG5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NvbG9yID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5fdHlwZSA9IFwicHJvamVjdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBjb2xvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGNvbG9yKG5ld0NvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5fY29sb3IgPSBuZXdDb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGl0bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3QocHJvamVjdCkge1xyXG5cclxuICAgIGNvbnN0IHByb2plY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHByb2plY3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIsIFwiYnRuLWdyb3VwXCIpO1xyXG5cclxuICAgIHByb2plY3RFbGVtZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvai1jb2xvciAke3Byb2plY3QuY29sb3J9XCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInByb2otdGl0bGVcIj4ke3Byb2plY3QubmFtZX08L2Rpdj5cclxuICAgIGBcclxuXHJcbiAgICBwcm9qZWN0RWxlbWVudC5kYXRhc2V0LnByb2plY3QgPSBwcm9qZWN0Lm5hbWU7XHJcblxyXG4gICAgcmV0dXJuIHByb2plY3RFbGVtZW50O1xyXG5cclxufVxyXG5cclxuZXhwb3J0IHtQcm9qZWN0LCBjcmVhdGVQcm9qZWN0fTsiLCJpbXBvcnQgVG9kbyBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCBMYWJlbCBmcm9tIFwiLi9sYWJlbFwiO1xyXG5pbXBvcnQgeyBXb3Jrc3BhY2UsIGNyZWF0ZVdvcmtzcGFjZSB9IGZyb20gXCIuL3dvcmtzcGFjZVwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0LCBjcmVhdGVQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdFwiO1xyXG5cclxuLy8gRGVmYXVsdCB3b3Jrc3BhY2VzXHJcbmNvbnN0IHRvZGF5V29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZShcIlRvZGF5XCIpO1xyXG5jb25zdCB3ZWVrV29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZShcIldlZWtcIik7XHJcbndlZWtXb3Jrc3BhY2UudGl0bGUgPSBcIlRoaXMgV2VlaydzXCI7XHJcblxyXG4vLyBEZWZhdWx0IHByb2plY3RzXHJcbmNvbnN0IGhvbWV3b3JrUHJvamVjdCA9IG5ldyBQcm9qZWN0KFwiSG9tZXdvcmtcIiwgXCJwdXJwbGVcIik7XHJcbmNvbnN0IHBlcnNvbmFsUHJvamVjdCA9IG5ldyBQcm9qZWN0KFwiUGVyc29uYWxcIiwgXCJncmVlblwiKTtcclxuXHJcbi8vIFN0b3JlIHdvcmtzcGFjZXNcclxubGV0IHdvcmtzcGFjZXMgPSBbXHJcbiAgICB0b2RheVdvcmtzcGFjZSxcclxuICAgIHdlZWtXb3Jrc3BhY2UsXHJcbiAgICBob21ld29ya1Byb2plY3QsXHJcbiAgICBwZXJzb25hbFByb2plY3QsXHJcbl07XHJcblxyXG4vLyBDdXJyZW50IHZhcnNcclxubGV0IGN1cnJlbnRXb3Jrc3BhY2U7XHJcbmxldCBjdXJyZW50VGFncyA9IFtdO1xyXG5cclxuLy8gRGVmYXVsdCB0b2Rvc1xyXG5sZXQgdGFncyA9IFtcclxuICAgIG5ldyBMYWJlbChcImpzXCIpLFxyXG4gICAgbmV3IExhYmVsKFwicHJvamVjdFwiKSxcclxuICAgIG5ldyBMYWJlbChcInRvZG9cIiksXHJcbl07XHJcbmxldCB0b2RvID0gbmV3IFRvZG8oXHJcbiAgICBcIlByYWN0aWNlIHVzaW5nIEpTIG1vZHVsZVwiLFxyXG4gICAgXCJDcmVhdGUgYSB0b2RvLWxpc3QgYXBwbGljYXRpb24gdG8gYWNoaWV2ZSB0aGlzXCJcclxuKTtcclxudG9kby50YWdzID0gdGFncztcclxudG9kYXlXb3Jrc3BhY2UuYWRkVG9kbyh0b2RvKTtcclxuXHJcbnRhZ3MgPSBbXHJcbiAgICBuZXcgTGFiZWwoXCJjc3NcIiksXHJcbiAgICBuZXcgTGFiZWwoXCJodG1sNVwiKSxcclxuICAgIG5ldyBMYWJlbChcIndvcmtcIiksXHJcbl07XHJcbnRvZG8gPSBuZXcgVG9kbyhcclxuICAgIFwiUHJhY3RpY2UgQ1NTIEZsZXhib3hcIixcclxuICAgIFwiVXNlIHByYWN0aWNlIHRvb2xzIHN1Y2ggYXMgZmxleGJveCBmcm9nZ3lcIlxyXG4pO1xyXG50b2RvLnRhZ3MgPSB0YWdzO1xyXG50b2RheVdvcmtzcGFjZS5hZGRUb2RvKHRvZG8pO1xyXG5cclxubGV0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xyXG5cclxuZnVuY3Rpb24gc2V0Q29udGVudChjb250ZW50LCB3b3Jrc3BhY2UpIHtcclxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcclxuICAgIG1haW5Db250ZW50LnJlcGxhY2VXaXRoKG5ld0NvbnRlbnQpO1xyXG4gICAgbWFpbkNvbnRlbnQgPSBuZXdDb250ZW50O1xyXG5cclxuICAgIGN1cnJlbnRXb3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFByb2plY3QocHJvamVjdCkge1xyXG4gICAgY29uc3QgcHJvakNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1jb250YWluZXJcIik7XHJcbiAgICBwcm9qQ29udGFpbmVyLmFwcGVuZChjcmVhdGVQcm9qZWN0KHByb2plY3QpKTtcclxufVxyXG5cclxuYWRkUHJvamVjdChob21ld29ya1Byb2plY3QpO1xyXG5hZGRQcm9qZWN0KHBlcnNvbmFsUHJvamVjdCk7XHJcbnNldENvbnRlbnQoY3JlYXRlV29ya3NwYWNlKHRvZGF5V29ya3NwYWNlKSwgdG9kYXlXb3Jrc3BhY2UpO1xyXG5cclxuLypcclxuQnV0dG9uIENsaWNraW5nXHJcbiovXHJcblxyXG4vLyBTaWRlYmFyIGJ1dHRvbiBhY3Rpb25zXHJcbmNvbnN0IGdyb3VwQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnRuLWdyb3VwXCIpO1xyXG5ncm91cEJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKCFidG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VsZWN0ZWRcIikpIHtcclxuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEluZGl2aWR1YWwgYnV0dG9uIGxvZ2ljXHJcbiAgICAgICAgICAgIGlmIChidG4uaWQgPT0gXCJncm91cC10b2RheVwiKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRDb250ZW50KGNyZWF0ZVdvcmtzcGFjZSh0b2RheVdvcmtzcGFjZSksIHRvZGF5V29ya3NwYWNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChidG4uaWQgPT0gXCJncm91cC13ZWVrXCIpIHtcclxuICAgICAgICAgICAgICAgIHNldENvbnRlbnQoY3JlYXRlV29ya3NwYWNlKHdlZWtXb3Jrc3BhY2UpLCB3ZWVrV29ya3NwYWNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChidG4uZGF0YXNldC5wcm9qZWN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0RGl2O1xyXG4gICAgICAgICAgICAgICAgd29ya3NwYWNlcy5mb3JFYWNoKCh3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHcubmFtZSA9PSBidG4uZGF0YXNldC5wcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3REaXYgPSB3O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldENvbnRlbnQoY3JlYXRlV29ya3NwYWNlKHByb2plY3REaXYpLCBwcm9qZWN0RGl2KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gb3RoZXIgYnV0dG9uXHJcbiAgICAgICAgICAgIGdyb3VwQnRucy5mb3JFYWNoKChidG4yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShidG4gPT09IGJ0bjIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuMi5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIENyZWF0ZSB0YXNrIGJ1dHRvblxyXG5jb25zdCBuZXdUb2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5jcmVhdGUtdG9kb1wiKTtcclxuY29uc3QgaDFJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaDEtaW5wdXRcIik7XHJcbmNvbnN0IHBJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucC1pbnB1dFwiKTtcclxubmV3VG9kb0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGxldCBlcnJvcnMgPSBmYWxzZTtcclxuICAgIGlmIChoMUlucHV0LnZhbHVlLmxlbmd0aCA8IDMpIHtcclxuICAgICAgICBlcnJvcnMgPSB0cnVlO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaDEtZXJyb3JcIikuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNoMS1lcnJvclwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gICAgaWYgKHBJbnB1dC52YWx1ZS5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgZXJyb3JzID0gdHJ1ZTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3AtZXJyb3JcIikuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwLWVycm9yXCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmV3VG9kbyA9IG5ldyBUb2RvKGgxSW5wdXQudmFsdWUsIHBJbnB1dC52YWx1ZSk7XHJcbiAgICBuZXdUb2RvLnRhZ3MgPSBjdXJyZW50VGFncztcclxuICAgIGN1cnJlbnRXb3Jrc3BhY2UuYWRkVG9kbyhuZXdUb2RvKTtcclxuXHJcbiAgICBzZXRDb250ZW50KGNyZWF0ZVdvcmtzcGFjZShjdXJyZW50V29ya3NwYWNlKSwgY3VycmVudFdvcmtzcGFjZSk7XHJcblxyXG4gICAgLy8gQ2xvc2UgcG9wdXBcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcC11cFwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG59KTtcclxuXHJcbi8vIE9wZW4gbGFiZWwgdGV4dCBmaWVsZCBidXR0b25cclxuY29uc3QgYWRkTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhZy1pY29uXCIpO1xyXG5hZGRMYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhZ1wiKS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG59KTtcclxuXHJcbi8qXHJcblRleHQgaW5wdXQgYWN0aW9uc1xyXG4qL1xyXG5jb25zb2xlLmxvZyhcInRlc3RcIik7XHJcblxyXG4vLyBDbG9zZSBwb3B1cFxyXG5jb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wLXVwXCIpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmgxLWlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnAtaW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgY3VycmVudFRhZ3MgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbGFiZWwtY29udGFpbmVyXCIpLnJlcGxhY2VDaGlsZHJlbigpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGNsb3NlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1jaXJjbGVcIik7XHJcbmNsb3NlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmgxLWlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucC1pbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgY3VycmVudFRhZ3MgPSBbXTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbGFiZWwtY29udGFpbmVyXCIpLnJlcGxhY2VDaGlsZHJlbigpO1xyXG59KTtcclxuXHJcbmV4cG9ydCB7IHNldENvbnRlbnQgfTtcclxuXHJcbi8vIENyZWF0ZSB0YWdzXHJcbmNvbnN0IHRhZ0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFnXCIpO1xyXG5jb25zdCBsYWJlbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1sYWJlbC1jb250YWluZXJcIik7XHJcbnRhZ0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xyXG4gICAgICAgIGlmICh0YWdJbnB1dC52YWx1ZS5sZW5ndGggPj0gMSkge1xyXG5cclxuICAgICAgICAgICAgbGV0IG5leHRMYWJlbE9iaiA9IG5ldyBMYWJlbCh0YWdJbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUYWdzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBuZXh0TGFiZWxPYmpcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBuZXh0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBuZXh0TGFiZWwuY2xhc3NMaXN0LmFkZChcImxhYmVsXCIpXHJcbiAgICAgICAgICAgIG5leHRMYWJlbC5jbGFzc0xpc3QuYWRkKG5leHRMYWJlbE9iai5jb2xvcik7XHJcbiAgICAgICAgICAgIG5leHRMYWJlbC50ZXh0Q29udGVudCA9IHRhZ0lucHV0LnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxhYmVsQ29udGFpbmVyLmFwcGVuZChuZXh0TGFiZWwpO1xyXG4gICAgICAgICAgICB0YWdJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJ0aXRsZSIsInRleHQiLCJ0YWdzIiwidGhpcyIsIl90aXRsZSIsIl90ZXh0IiwiX3RhZ3MiLCJfZXhpc3RzIiwibmV3VGl0bGUiLCJuZXdUZXh0IiwibmV3VGFncyIsImFkZFRhZyIsIm5ld1RhZyIsInB1c2giLCJleGlzdHMiLCJuZXdFeGlzdHMiLCJjb2xvciIsIl9jb2xvciIsImdlbmVyYXRlQ29sb3IiLCJuZXdDb2xvciIsImdldFRleHRJRCIsInZhbCIsImkiLCJsZW5ndGgiLCJjaGFyQ29kZUF0IiwiV29ya3NwYWNlIiwibmFtZSIsIl9uYW1lIiwiX3RvZG9zIiwiX3R5cGUiLCJ0b2RvcyIsImFkZFRvZG8iLCJ0b2RvIiwicmVtb3ZlVG9kbyIsInBvcCIsInR5cGUiLCJjcmVhdGVXb3Jrc3BhY2UiLCJ3b3Jrc3BhY2UiLCJtYWluIiwiY29udGVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImlubmVySFRNTCIsImZvckVhY2giLCJ0b2QiLCJsYWJlbENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjdXJyZW50TGFiZWxDb250YWluZXIiLCJ0YWciLCJ0ZXh0Q29udGVudCIsImFwcGVuZCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsInBvcHVwIiwiYWRkVG9kb0ZpZWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImNrYngiLCJlIiwiY3VycmVudFRhcmdldCIsImNoZWNrZWQiLCJjaGVja0NhcmQiLCJjbG9zZXN0IiwiY3VyciIsInNldFRpbWVvdXQiLCJzZXRDb250ZW50IiwiUHJvamVjdCIsInN1cGVyIiwidG9kYXlXb3Jrc3BhY2UiLCJ3ZWVrV29ya3NwYWNlIiwiaG9tZXdvcmtQcm9qZWN0IiwicGVyc29uYWxQcm9qZWN0IiwiY3VycmVudFdvcmtzcGFjZSIsIndvcmtzcGFjZXMiLCJjdXJyZW50VGFncyIsIm1haW5Db250ZW50IiwibmV3Q29udGVudCIsInJlcGxhY2VXaXRoIiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJwcm9qZWN0RWxlbWVudCIsImRhdGFzZXQiLCJjcmVhdGVQcm9qZWN0IiwiZ3JvdXBCdG5zIiwiYnRuIiwiY29udGFpbnMiLCJpZCIsInByb2plY3REaXYiLCJ3IiwiYnRuMiIsInJlbW92ZSIsIm5ld1RvZG9CdG4iLCJoMUlucHV0IiwicElucHV0IiwiZXJyb3JzIiwibmV3VG9kbyIsInRvZ2dsZSIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJyZXBsYWNlQ2hpbGRyZW4iLCJ0YWdJbnB1dCIsIm5leHRMYWJlbE9iaiIsIm5leHRMYWJlbCJdLCJzb3VyY2VSb290IjoiIn0=